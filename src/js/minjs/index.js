"use strict";var mySwiper=new Swiper(".container",{pagination:{el:".pagination",clickable:!0}}),myBScroll=new BScroll(".wrapper",{probeType:2,click:!0}),idx=0;function render(n){var a="";n.map(function(n){a+='\n                <dl>\n                    <dt><img src="./images/'.concat(n.img,'" alt=""></dt>\n                    <dd>\n                        <p>').concat(n.tit,"</p>\n                        <p>").concat(n.menu,"</p>\n                         <p><span><b>").concat(n.money,"&nbsp;&nbsp;</b>门市价").concat(n.price,"元</span><span>已售").concat(n.sell,"</span></p>\n                    </dd>\n                </dl>\n                ")}),$(".list").append(a),myBScroll.refresh()}function render2(n){var a="";n.map(function(n){a+='\n                <dl>\n                    <dt><img src="./images/'.concat(n.img,'" alt=""></dt>\n                    <dd>\n                        <p>').concat(n.tit,"</p>\n                        <p>").concat(n.menu,"</p>\n                         <p><span><b>").concat(n.money,"&nbsp;&nbsp;</b>门市价").concat(n.price,"元</span><span>已售").concat(n.sell,"</span></p>\n                    </dd>\n                </dl>\n                ")}),$(".list").html(a),myBScroll.refresh()}function up(){idx++,$.ajax({url:"/api/getData?idx="+idx,success:function(n){0===(n=JSON.parse(n)).code?(n.data.length<=0?($("footer").removeClass("none"),$(".up").addClass("none")):($("footer").addClass("none"),$(".up").removeClass("none")),render(n.data)):alert("请求失败!")}})}function down(){idx=0,$("footer").addClass("none"),$(".up").removeClass("none"),$.ajax({url:"/api/getData?idx="+idx,success:function(n){0===(n=JSON.parse(n)).code?render2(n.data):alert("请求失败!")}})}$.ajax({url:"/api/getData?idx="+idx,success:function(n){0===(n=JSON.parse(n)).code?render(n.data):alert("请求失败!")}}),$(".sec").fadeIn(1500),myBScroll.on("scroll",function(){this.y<this.maxScrollY-140?$(".up").html("释放加载").addClass("flip"):this.y<0&&this.y>this.maxScrollY-100?$(".up").html("上拉加载……").removeClass("flip"):70<this.y?$(".down").html("释放刷新").addClass("flip"):0<this.y&&this.y<10&&$(".down").html("下拉刷新……").removeClass("flip")}),myBScroll.on("scrollEnd",function(){$(".up").hasClass("flip")?(up(),$(".up").html("上拉加载……").removeClass("flip")):$(".down").hasClass("flip")&&(down(),$(".down").html("下拉刷新……").removeClass("flip"))});